  <<<<<<< snyk-fix-29ee18a5679306bc9da727f1ec18fbdb
FROM php:7.2-cli-alpine3.10
  =======
  <<<<<<< snyk-fix-6e0a910c9d208e201599f91124a66e93
FROM php:7-cli-alpine3.10
  =======
  <<<<<<< snyk-fix-52c63da506590b57eb6cce4b488de675
FROM php:7.2.30-cli-alpine3.10
  =======
FROM php:7.3-cli-alpine3.10
  >>>>>>> master
  >>>>>>> master
  >>>>>>> master

ARG DOCKER_USER_ID
ARG DOCKER_GROUP_ID

RUN if ! getent group "${DOCKER_GROUP_ID}" > /dev/null; \
    then addgroup -S -g "${DOCKER_GROUP_ID}" devs; \
  fi \
  && if ! getent passwd "${DOCKER_USER_ID}" > /dev/null; \
    then adduser -S -u "${DOCKER_USER_ID}" -G "$(getent group "${DOCKER_GROUP_ID}" | awk -F: '{printf $1}')" dev; \
  fi \
  && apk add --no-cache git libxml2-dev openssh-client \
  && apk add --no-cache --virtual .build-deps autoconf g++ make \
  # xdebug
  && pecl install xdebug-2.9.8 \
  && docker-php-ext-enable xdebug \
  # composer
  && curl --output composer-setup.php https://getcomposer.org/installer \
  && php composer-setup.php --install-dir=/usr/local/bin --filename=composer \
  && rm composer-setup.php \
  # xdebug command
  && curl --location --output /usr/local/bin/xdebug https://github.com/julienfalque/xdebug/releases/download/v1.1.0/xdebug \
  && chmod +x /usr/local/bin/xdebug \
  # clean up
  && apk del .build-deps

COPY xdebug.ini /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini
